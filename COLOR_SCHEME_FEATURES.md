# 颜色方案选择器功能说明

## 功能概览

ChartsTools v1.1.1 版本新增了强大的颜色方案选择器功能，提供了15种预设颜色方案和完全自定义的颜色编辑功能。

## 主要功能

### 1. 扩展的预设颜色方案（15种）

#### 经典渐变系列
- **蓝色渐变**: 从深蓝到浅蓝的经典渐变，适用于相关性矩阵
- **红色渐变**: 从深红到浅红的暖色渐变，适用于强度数据
- **绿色渐变**: 从深绿到浅绿的自然渐变，适用于增长数据
- **彩虹渐变**: 多色彩渐变，视觉效果丰富

#### 扩展渐变系列
- **紫色渐变**: 典雅的紫色系渐变
- **橙色渐变**: 温暖的橙色系渐变
- **青色渐变**: 清新的青色系渐变
- **粉色渐变**: 柔和的粉色系渐变
- **黄绿渐变**: 自然的黄绿色系渐变

#### 主题色彩系列
- **深海蓝**: 深邃的海洋蓝色主题
- **火焰红**: 炽热的火焰红色主题
- **森林绿**: 自然的森林绿色主题
- **紫罗兰**: 优雅的紫罗兰色主题

#### 色调分类系列
- **暖色调**: 温暖的色彩组合
- **冷色调**: 冷静的色彩组合

### 2. 自定义颜色编辑器

#### 颜色数量调整
- 支持3-10种颜色的自定义配置
- 通过数字选择器动态调整颜色数量
- 自动补充默认颜色

#### 颜色选择
- 点击颜色按钮弹出颜色选择器
- 支持RGB、HSL、十六进制等多种格式
- 实时预览颜色效果

#### 快速应用功能
- 一键将预设方案应用到自定义编辑器
- 快速应用按钮：蓝色、红色、绿色、彩虹
- 保持自定义编辑器的灵活性

### 3. 实时预览功能

#### 渐变预览条
- 实时显示当前选中颜色方案的渐变效果
- 支持多种颜色数量的渐变显示
- 自动计算渐变停止点

#### 图表实时更新
- 颜色方案更改立即反映到热力图
- 无需额外操作，即时生效
- 配置面板与图表完全同步

### 4. 用户界面优化

#### 直观的操作界面
- 颜色方案下拉选择器
- 颜色预览区域
- 自定义编辑器组织清晰

#### 响应式设计
- 自定义编辑器智能显示/隐藏
- 根据选择自动调整界面布局
- 支持不同屏幕尺寸

## 使用方法

### 1. 选择预设颜色方案
1. 在样式配置选项卡中找到"颜色配置"组
2. 在"颜色方案"下拉列表中选择所需方案
3. 预览区域会立即显示颜色效果
4. 热力图会自动更新为新的颜色方案

### 2. 使用自定义颜色编辑器
1. 在颜色方案中选择"自定义"
2. 自定义颜色编辑器会自动显示
3. 调整"颜色数量"滑块设置颜色数量
4. 点击颜色按钮选择具体颜色
5. 预览区域实时显示效果

### 3. 快速应用预设到自定义
1. 在自定义编辑器中点击"快速应用"区域的按钮
2. 选择要应用的预设方案（蓝、红、绿、彩虹）
3. 预设颜色会自动应用到自定义编辑器
4. 可以在此基础上进一步调整

## 技术实现

### 核心方法
- `on_color_scheme_changed()`: 处理颜色方案变更
- `update_color_preview()`: 更新颜色预览
- `update_custom_color_editor()`: 管理自定义颜色编辑器
- `choose_custom_color()`: 选择自定义颜色
- `apply_preset_to_custom()`: 应用预设到自定义
- `get_current_color_scheme()`: 获取当前颜色方案

### 配置集成
- 颜色方案配置与ECharts完全集成
- 支持实时配置更新
- 自动同步到HTML代码生成

## 配置文件支持

### 颜色方案保存
- 自定义颜色方案可以保存到配置文件
- 支持项目配置的导入导出
- 颜色配置持久化

### 配置格式
```json
{
  "style": {
    "colorScheme": {
      "preset": "自定义",
      "colors": ["#313695", "#74add1", "#abd9e9", "#e0f3f8", "#ffffbf"]
    }
  }
}
```

## 兼容性说明

### 向后兼容
- 旧版本的颜色配置自动升级
- 保持原有4种基础颜色方案
- 配置文件格式兼容

### 平台支持
- Windows、macOS、Linux全平台支持
- 依赖PyQt6颜色选择器
- 支持不同系统的颜色格式

## 性能优化

### 实时渲染
- 颜色方案更改立即生效
- 优化的配置更新机制
- 避免不必要的重绘

### 内存管理
- 高效的颜色数据结构
- 智能的UI控件管理
- 优化的预览渲染

## 未来发展

### 计划功能
- 更多预设颜色方案
- 颜色方案导入导出
- 颜色盲友好方案
- 主题颜色自动匹配

### 扩展可能
- 渐变编辑器
- 颜色动画效果
- 智能颜色推荐
- 颜色方案分享 